@import "tailwindcss";

/* ── Win95 Theme ───────────────────────────────────── */
@theme {
  --color-win-panel: #e6e6e6;
  --color-win-button: #dcdcdc;
  --color-win-hover: #efefef;
  --color-win-titlebar: #000080;
  --color-win-border-dark: #5b5b5b;
  --color-win-border-light: #ffffff;
  --color-win-subtle: #cfcfcf;
  --color-win-surface: #f3f3f3;
  --color-win-bg-light: #f0f0f0;
  --color-win-inset-shadow: #9a9a9a;
  --color-win-inset-highlight: #f6f6f6;
  --color-win-text: #000000;
  --color-win-text-muted: #333333;
  --color-win-text-subtle: #6b7280;
  --color-win-danger: #7a1b1b;
  --color-win-success: #0f5132;
  --color-win-header-bg: #d0d0d0;
  --color-win-border-mid: #b5b5b5;
  --color-win-active-bg: #efe2b8;
  --color-win-active-text: #3a2b12;

  --font-win: "Tahoma", "Verdana", "Trebuchet MS", "Geneva", sans-serif;
  --font-mono-win: "Menlo", "Monaco", monospace;

  --z-selection-panel: 200;
  --z-hand: 700;
  --z-shortcut-dock: 800;
  --z-help-button: 1001;
  --z-help-dialog: 1200;
  --z-card-search-zoom: 1200;
  --z-context-menu: 1500;
  --z-modal: 2000;
  --z-counter-panel: 2000;
  --z-ghost: 2200;
  --z-zoomed-card: 2200;
  --z-context-backdrop: 2500;
  --z-tooltip: 3000;
  --z-setup: 3000;
}

/* ── Base resets ───────────────────────────────────── */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html,
  body,
  #root {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
  }

  body {
    overscroll-behavior: none;
  }

  svg,
  svg * {
    touch-action: none;
  }

  svg foreignObject,
  svg foreignObject * {
    touch-action: auto;
  }

  body.hand-dragging svg,
  body.hand-dragging .selection-panel,
  body.hand-dragging .action-log-container,
  body.hand-dragging .help-button,
  body.hand-dragging .shortcut-dock,
  body.hand-dragging .shortcut-dock-toggle {
    pointer-events: none;
  }

  body.modal-open svg {
    pointer-events: none;
  }

  body.modal-open .Modal__overlay {
    pointer-events: auto;
  }
}

@keyframes setup-fade {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes setup-rise {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ── Reusable Win95 component classes ──────────────── */
@layer components {
  /* Beveled borders */
  .win-bevel {
    border: 2px solid #000000;
    border-color: #ffffff #5b5b5b #5b5b5b #ffffff;
  }

  .win-bevel-raised {
    border: 2px solid #000000;
    border-color: #ffffff #5b5b5b #5b5b5b #ffffff;
    box-shadow: inset 1px 1px 0 #f6f6f6, inset -1px -1px 0 #8a8a8a;
  }

  .win-bevel-pressed {
    border-color: #5b5b5b #ffffff #ffffff #5b5b5b;
    box-shadow: inset 1px 1px 0 #9a9a9a, inset -1px -1px 0 #ffffff;
  }

  .win-bevel-inset {
    border: 2px solid #000000;
    border-color: #5b5b5b #ffffff #ffffff #5b5b5b;
  }

  /* Title bar */
  .win-titlebar {
    background: #000080;
    color: #ffffff;
    border-bottom: 2px solid #000000;
  }

  /* Panel container */
  .win-panel {
    background: #e6e6e6;
    border: 2px solid #000000;
    border-color: #ffffff #5b5b5b #5b5b5b #ffffff;
    border-radius: 4px;
    box-shadow: none;
    font-family: "Tahoma", "Verdana", "Trebuchet MS", "Geneva", sans-serif;
    color: #000000;
  }

  /* Button */
  .win-button {
    background: #dcdcdc;
    color: #000000;
    border: 2px solid #000000;
    border-color: #ffffff #5b5b5b #5b5b5b #ffffff;
    border-radius: 2px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.1s ease, border-color 0.1s ease;
  }

  .win-button:hover {
    background: #efefef;
  }

  .win-button:active {
    border-color: #5b5b5b #ffffff #ffffff #5b5b5b;
    box-shadow: inset 1px 1px 0 #9a9a9a, inset -1px -1px 0 #ffffff;
  }

  .win-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
  }

  /* Input (sunken border) */
  .win-input {
    border: 2px solid #000000;
    border-color: #5b5b5b #ffffff #ffffff #5b5b5b;
    border-radius: 2px;
    background: #ffffff;
    transition: background 0.1s ease, border-color 0.1s ease;
  }

  .win-input:focus {
    outline: none;
    border-color: #000000;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.15);
  }

  /* Inset shadow */
  .win-inset-shadow {
    box-shadow: inset 1px 1px 0 #ffffff, inset -1px -1px 0 #9a9a9a;
  }

  .useContextMenu_Backdrop {
    --context-menu-z-index: 2500;
    z-index: var(--context-menu-z-index);
  }

  .useContextMenu_ContextMenu {
    --context-menu-z-index: 1500;
    --context-menu-border-radius: 2px;
    --context-menu-padding: 4px 0;
    --context-menu-background-color: #e6e6e6;
    --context-menu-border-size: 2px;
    --context-menu-border-color: #000000;
    --context-menu-font-family: "Tahoma", "Verdana", "Trebuchet MS", "Geneva", sans-serif;
    --context-menu-category-color: #000000;
    --context-menu-category-font-size: 12px;
    --context-menu-category-padding: 4px 10px;
    --context-menu-item-color: #000000;
    --context-menu-item-font-size: 12px;
    --context-menu-item-padding: 4px 10px;
    --context-menu-divider-color: #5b5b5b;
    --context-menu-divider-margin: 4px 8px;
    --context-menu-item-background-color-hover: #cfcfcf;
    --context-menu-item-color-hover: #000000;
    --context-menu-item-background-color-focus: #cfcfcf;
    --context-menu-item-color-focus: #000000;
    border-color: #ffffff #5b5b5b #5b5b5b #ffffff;
    box-shadow: none;
    z-index: var(--context-menu-z-index, 2500);
  }

  .useContextMenu_ContextMenuCategory {
    background: #d0d0d0;
    border-bottom: 1px solid #b5b5b5;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  .useContextMenu_ContextMenuItem {
    background: #e6e6e6;
  }

  .useContextMenu_ContextMenuItem:active {
    background: #c0c0c0;
  }

  .useContextMenu_ContextMenuItemDisabled {
    background-color: #dcdcdc;
    color: #777777;
  }

  .selection-panel::-webkit-scrollbar {
    width: 8px;
  }

  .selection-panel::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 4px;
  }

  .selection-panel::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
  }

  .selection-panel::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
  }

  .help-dialog::-webkit-scrollbar,
  .help-dialog-content::-webkit-scrollbar {
    width: 8px;
  }

  .help-dialog::-webkit-scrollbar-track,
  .help-dialog-content::-webkit-scrollbar-track {
    background: #dcdcdc;
    border-radius: 4px;
  }

  .help-dialog::-webkit-scrollbar-thumb,
  .help-dialog-content::-webkit-scrollbar-thumb {
    background: #9a9a9a;
    border-radius: 4px;
  }

  .help-dialog::-webkit-scrollbar-thumb:hover,
  .help-dialog-content::-webkit-scrollbar-thumb:hover {
    background: #7a7a7a;
  }

  .help-dialog,
  .help-dialog-content {
    scrollbar-width: thin;
    scrollbar-color: #9a9a9a #dcdcdc;
  }

  .selection-panel__pill {
    border: 2px solid #000000;
    border-color: #ffffff #5b5b5b #5b5b5b #ffffff;
    border-radius: 6px;
    padding: 6px 12px;
    background: #dcdcdc;
    color: #000000;
    font-size: 12px;
    font-weight: 600;
    box-shadow: inset 1px 1px 0 #f6f6f6, inset -1px -1px 0 #8a8a8a;
    transition: transform 0.1s ease, box-shadow 0.1s ease, border-color 0.1s ease;
  }

  .selection-panel__pill.is-active {
    background: #efe2b8;
    border-color: #5b5b5b #ffffff #ffffff #5b5b5b;
    box-shadow: inset 1px 1px 0 #9a9a9a, inset -1px -1px 0 #ffffff;
    color: #3a2b12;
  }

  .selection-panel__pill:hover {
    background: #e6e6e6;
  }

  .selection-panel__pill.is-active:hover {
    background: #f4e6bf;
  }

  .selection-panel__pill:active {
    border-color: #5b5b5b #ffffff #ffffff #5b5b5b;
    box-shadow: inset 1px 1px 0 #8a8a8a, inset -1px -1px 0 #f6f6f6;
  }

  .selection-panel__pill:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
  }

  .selection-panel__pill.danger {
    border-color: #ffffff #7a1b1b #7a1b1b #ffffff;
    color: #7a1b1b;
  }
}

@media (max-height: 600px) {
  .help-dialog {
    max-height: calc(100vh - 80px) !important;
    font-size: 12px !important;
    top: 40px !important;
  }

  .help-dialog h3 {
    font-size: 14px !important;
    margin-bottom: 8px !important;
  }

  .help-dialog h4 {
    font-size: 12px !important;
    margin: 6px 0 4px !important;
  }
}
